{
  "hash": "cff938a7873dbe16b8bcb3f04276539e",
  "result": {
    "markdown": "---\ntitle: \"Data Visualization\"\nauthor: \"Adrian Florea\"\n---\n\n\n# Cumulative COVID-19 Cases\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-1_e511cbe998f5e62f6902cd0ba30f73f1'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(ggthemes)\n\ncovid_data_tbl <- read_csv(\"https://covid.ourworldindata.org/data/owid-covid-data.csv\")\n\n# 1.0 Data Manipulation ----\n\nfilter_countries <- c(\"Germany\", \"United Kingdom\", \"France\", \"Spain\", \"United States\")\n\ncovid_cum_cases <- covid_data_tbl %>% \n  select(location, date, total_cases) %>% \n  filter(location %in% filter_countries,\n         year(date) < 2022 |\n         year(date) == 2022 & month(date) < 5 & day(date) <= 19) %>% \n  mutate(across(total_cases, ~replace_na(., 0))) %>% \n  mutate(label_text = scales::number(total_cases,\n                                     big.mark = \".\"))\n\neurope_cases <- covid_data_tbl %>% \n  select(continent,date,total_cases) %>% \n  filter(continent == \"Europe\",\n         year(date) < 2022 |\n         year(date) == 2022 & month(date) < 5 & day(date) <= 19) %>% \n  mutate(across(total_cases, ~replace_na(., 0))) %>%\n  group_by(continent,date) %>% \n  summarize(total_cases = sum(total_cases)) %>% \n  mutate(label_text_E = scales::number(total_cases,\n                                     big.mark = \".\"))\n\ncustom_label_country <- covid_cum_cases %>% \n  filter(date == \"2022-04-19\" & location == \"United States\")\n\ncustom_label_europe <- europe_cases %>% \n  filter(date == \"2022-04-19\")\n\n# 2.0 Data Visualization ----\n\ncovid_cum_cases %>%\n  \n  ggplot(aes(date, total_cases, color = location)) +\n  \n  # Geometries\n  geom_smooth(method = \"loess\", span = 0.05, size = 0.7) +\n  geom_smooth(data = europe_cases, aes(color = continent), method = \"loess\", span = 0.05, size = 0.7) +\n  geom_label(data = custom_label_country, aes(label = label_text),\n             nudge_x = -80, show.legend = FALSE) +\n  geom_label(data = custom_label_europe, aes(label = label_text_E, color = continent),\n             nudge_x = -100, nudge_y = -30, show.legend = FALSE) + \n  \n  # Scales\n  scale_y_continuous(labels = scales::number_format(scale = 1/1e6,\n                                                    suffix = \"M\")) +\n  scale_x_date(breaks = \"1 month\",date_labels = \"%B '%y\", position = \"bottom\") +\n  \n  # Themes\n  theme_dark() + \n  scale_color_viridis_d(option = \"H\") + \n\n  theme(\n    axis.text.x = element_text(\n      angle = 45,\n      hjust = 1\n    ),\n    legend.position = \"bottom\") +\n  \n  guides(color = guide_legend(nrow = 2)) +\n\n  # Labels\n  labs(\n  title = \"COVID-19 confirmed cases worldwide\",\n  subtitle = \"As of 19/04/2022\",\n  x = \"\",\n  y = \"Cumulative Cases\",\n  color = \"Continent / Country\"\n  )\n```\n\n::: {.cell-output-display}\n![](04_data_visualization_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}