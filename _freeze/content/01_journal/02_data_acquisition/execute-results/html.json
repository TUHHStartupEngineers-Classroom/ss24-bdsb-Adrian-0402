{
  "hash": "bed01e17dc15c490c7210e8bcd9e523c",
  "result": {
    "markdown": "---\ntitle: \"Data Acquisition\"\nauthor: \"Adrian Florea\"\n---\n\n\n# Getting some data through Spotify API\n\n\n::: {.cell hash='02_data_acquisition_cache/html/unnamed-chunk-1_15cb5308e8cc90c5080988aec610f37f'}\n\n```{.r .cell-code}\n#Spotify API\n\nlibrary(spotifyr) #install via devtools::install_github('charlie86/spotifyr')\nlibrary(tidyverse)\nlibrary(lubridate)\n\n# can't use get_spotify_access_token() since function will prompt to website with \"Illegal scope\"\n# only way to bypass this broken API is to avoid certain scopes\nauth_object <- get_spotify_authorization_code(scope = scopes()[c(7,8,9,10,14,15)])\n\n\ntop_tracks_tbl <- get_my_top_artists_or_tracks(\n  type = \"tracks\",\n  limit = 20,\n  offset = 0,\n  time_range = \"medium_term\",\n  authorization = auth_object,\n  include_meta_info = FALSE\n) %>% as_tibble()\n\n\ntop_tracks_wrangled_tbl <- top_tracks_tbl %>%\n  mutate(duration_min = duration((duration_ms / 1000),\"seconds\")) %>% \n  select(artists,duration_min,name,popularity) %>% \n  rename(track_name = name) %>%\n  unnest(artists) %>% \n  rename(artists = name) %>%\n  select(artists,duration_min,track_name,popularity) %>%\n  group_by(duration_min,track_name,popularity) %>% \n  summarize(artists = paste(unique(artists), collapse = \", \")) %>%\n  select(artists,track_name,duration_min,popularity) %>% \n  arrange(desc(popularity))\n\ntop_tracks_wrangled_tbl %>% \n  head(n = 10)\n\n\n# A tibble: 10 Ã— 4\n# Groups:   duration_min, track_name [10]\n#  artists                      track_name         duration_min             popularity\n#  <chr>                        <chr>              <Duration>                    <int>\n#1 Kenya Grace                  Strangers          172.964s (~2.88 minutes)         88\n#2 Dynoro, Gigi D'Agostino      In My Mind         184.56s (~3.08 minutes)          80\n#3 Vicetone                     Walk Thru Fire     194.482s (~3.24 minutes)         66\n#4 deadmau5, Rob Swire          Ghosts 'n' Stuff   328.253s (~5.47 minutes)         56\n#5 Vini Vici, Ranji, Halflives  Everyday Rockstars 209.375s (~3.49 minutes)         41\n#6 Aether, Sizzle Bird, Veela   Raccoon City       226.925s (~3.78 minutes)         38\n#7 Bensley, Skyelle             All I Wanted       244.137s (~4.07 minutes)         35\n#8 Draper, Laura Brehm          Pressure           318.537s (~5.31 minutes)         35\n#9 Tut Tut Child, Danyka Nadeau Breathe            275.121s (~4.59 minutes)         31\n#10 Nomyn, Veela                Be Honest          223.655s (~3.73 minutes)         30\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}